/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package chriso.library.view;

import chriso.library.controller.AdminDAO;
import chriso.library.controller.BookDAO;
import chriso.library.controller.BorrowDAO;
import chriso.library.controller.StudentDAO;
import chriso.library.miscelleneous.DateManager;
import chriso.library.miscelleneous.ErrorOutputHolder;
import chriso.library.miscelleneous.InputController;
import chriso.library.model.Book;
import chriso.library.model.Borrow;
import chriso.library.model.Student;
import java.awt.Color;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.sql.Blob;
import java.sql.Date;
import java.sql.SQLException;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Locale;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

/**
 *
 * @author Amit
 */
public class BorrowBookRecord extends javax.swing.JInternalFrame {
    String search = ""; //this declaratioon of the variable is required to
    //store the student id input requested by the user 
    /**
     * Creates new form BorrowBook
     */
    public BorrowBookRecord() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel_fullName = new javax.swing.JLabel();
        jLabel_bookId = new javax.swing.JLabel();
        jLabel_batch = new javax.swing.JLabel();
        jLabel_bookQty = new javax.swing.JLabel();
        jLabel_department = new javax.swing.JLabel();
        jLabel_date = new javax.swing.JLabel();
        jTextField_fullName = new javax.swing.JTextField();
        jTextField_bookId = new javax.swing.JTextField();
        jTextField_batch = new javax.swing.JTextField();
        jTextField_bookQty = new javax.swing.JTextField();
        jTextField_departMent = new javax.swing.JTextField();
        jTextField_issueDate = new javax.swing.JTextField();
        jPanel_titleHolder = new javax.swing.JPanel();
        jLabel_title = new javax.swing.JLabel();
        jTextField_studentId = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jButton_confirmBorrow = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JSeparator();
        jLabel1 = new javax.swing.JLabel();
        jLabel_dateFormatHint = new javax.swing.JLabel();
        jLabel_bookIdError = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jComboBox_dayMonthYear = new javax.swing.JComboBox();
        jTextField_returnDateDigit = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();

        setClosable(true);
        setIconifiable(true);

        jPanel1.setBackground(new java.awt.Color(204, 204, 204));

        jLabel_fullName.setText("Full Name");

        jLabel_bookId.setText("Book Id");

        jLabel_batch.setText("Batch");

        jLabel_bookQty.setText("No. of Book");

        jLabel_department.setText("Department");

        jLabel_date.setText("Date");

        jTextField_fullName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_fullNameActionPerformed(evt);
            }
        });
        jTextField_fullName.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_fullNameKeyTyped(evt);
            }
        });

        jTextField_bookId.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextField_bookIdFocusLost(evt);
            }
        });
        jTextField_bookId.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_bookIdActionPerformed(evt);
            }
        });
        jTextField_bookId.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_bookIdKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_bookIdKeyTyped(evt);
            }
        });

        jTextField_batch.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_batchActionPerformed(evt);
            }
        });
        jTextField_batch.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_batchKeyTyped(evt);
            }
        });

        jTextField_bookQty.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_bookQtyActionPerformed(evt);
            }
        });
        jTextField_bookQty.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_bookQtyKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_bookQtyKeyTyped(evt);
            }
        });

        jTextField_departMent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_departMentActionPerformed(evt);
            }
        });
        jTextField_departMent.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_departMentKeyTyped(evt);
            }
        });

        jTextField_issueDate.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jTextField_issueDateFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextField_issueDateFocusLost(evt);
            }
        });
        jTextField_issueDate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_issueDateActionPerformed(evt);
            }
        });
        jTextField_issueDate.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_issueDateKeyTyped(evt);
            }
        });

        jPanel_titleHolder.setBackground(new java.awt.Color(153, 153, 153));

        jLabel_title.setBackground(new java.awt.Color(204, 204, 204));
        jLabel_title.setFont(new java.awt.Font("Tahoma", 3, 36)); // NOI18N
        jLabel_title.setForeground(new java.awt.Color(0, 102, 102));
        jLabel_title.setText("Borrow Library Book Detail");

        javax.swing.GroupLayout jPanel_titleHolderLayout = new javax.swing.GroupLayout(jPanel_titleHolder);
        jPanel_titleHolder.setLayout(jPanel_titleHolderLayout);
        jPanel_titleHolderLayout.setHorizontalGroup(
            jPanel_titleHolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel_titleHolderLayout.createSequentialGroup()
                .addContainerGap(177, Short.MAX_VALUE)
                .addComponent(jLabel_title, javax.swing.GroupLayout.PREFERRED_SIZE, 582, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(40, 40, 40))
        );
        jPanel_titleHolderLayout.setVerticalGroup(
            jPanel_titleHolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel_titleHolderLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel_title)
                .addContainerGap())
        );

        jTextField_studentId.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jTextField_studentId.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField_studentIdActionPerformed(evt);
            }
        });
        jTextField_studentId.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField_studentIdKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_studentIdKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_studentIdKeyTyped(evt);
            }
        });

        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel8.setText("Student Id: ");

        jButton_confirmBorrow.setBackground(new java.awt.Color(0, 102, 102));
        jButton_confirmBorrow.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_confirmBorrow.setForeground(new java.awt.Color(51, 51, 51));
        jButton_confirmBorrow.setText("confirm  Borrowing ");
        jButton_confirmBorrow.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_confirmBorrowActionPerformed(evt);
            }
        });

        jLabel_bookIdError.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel_bookIdError.setForeground(new java.awt.Color(0, 102, 102));

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(255, 0, 51));

        jComboBox_dayMonthYear.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Day(s)", "Month(s)", "Year(s)"}));

        jTextField_returnDateDigit.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_returnDateDigitKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_returnDateDigitKeyTyped(evt);
            }
        });

        jLabel3.setText("Return After");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel_titleHolder, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 890, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(200, 200, 200)
                        .addComponent(jLabel8)
                        .addGap(18, 18, 18)
                        .addComponent(jTextField_studentId, javax.swing.GroupLayout.PREFERRED_SIZE, 252, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(4, 4, 4)
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 178, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(42, 42, 42)
                        .addComponent(jLabel_fullName)
                        .addGap(40, 40, 40)
                        .addComponent(jTextField_fullName, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(30, 30, 30)
                        .addComponent(jLabel_bookId)
                        .addGap(31, 31, 31)
                        .addComponent(jTextField_bookId, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel_bookIdError, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(42, 42, 42)
                        .addComponent(jLabel_batch)
                        .addGap(59, 59, 59)
                        .addComponent(jTextField_batch, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel_bookQty)
                        .addGap(26, 26, 26)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTextField_bookQty, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 232, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(42, 42, 42)
                        .addComponent(jLabel_department, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(jTextField_departMent, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(30, 30, 30)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel_date)
                            .addComponent(jLabel3))
                        .addGap(7, 7, 7)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(jTextField_returnDateDigit, javax.swing.GroupLayout.PREFERRED_SIZE, 109, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jComboBox_dayMonthYear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jTextField_issueDate, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel_dateFormatHint, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(267, 267, 267)
                        .addComponent(jButton_confirmBorrow, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jPanel_titleHolder, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(5, 5, 5)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(10, 10, 10)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(4, 4, 4)
                        .addComponent(jLabel8))
                    .addComponent(jTextField_studentId, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(13, 13, 13)
                                .addComponent(jLabel_fullName))
                            .addComponent(jTextField_fullName, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(23, 23, 23)
                                .addComponent(jLabel_bookId))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(1, 1, 1)
                                .addComponent(jTextField_bookId, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel_bookIdError, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(38, 38, 38)
                        .addComponent(jLabel_batch))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(22, 22, 22)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jTextField_bookQty, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jTextField_batch, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel_bookQty, javax.swing.GroupLayout.PREFERRED_SIZE, 13, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel2)))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(24, 24, 24)
                        .addComponent(jLabel_department))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(12, 12, 12)
                        .addComponent(jTextField_departMent, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(20, 20, 20)
                        .addComponent(jLabel_date))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(50, 50, 50)
                        .addComponent(jLabel_dateFormatHint, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(jTextField_issueDate, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jComboBox_dayMonthYear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextField_returnDateDigit, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel3))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                .addComponent(jButton_confirmBorrow, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(43, 43, 43))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 800, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 800, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 0, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 438, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jTextField_fullNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_fullNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_fullNameActionPerformed

    private void jTextField_bookIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_bookIdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_bookIdActionPerformed

    private void jTextField_batchActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_batchActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_batchActionPerformed

    private void jTextField_bookQtyActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_bookQtyActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_bookQtyActionPerformed

    private void jTextField_departMentActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_departMentActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_departMentActionPerformed

    private void jTextField_studentIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_studentIdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_studentIdActionPerformed
private java.util.Date getSubmisssionDateValue(long issueDateVal) {
      int additionalsec=0;
      long totalTimeStamp;
      int dateinput = Integer.parseInt(jTextField_returnDateDigit.getText().toString());
      String daymonthyear = jComboBox_dayMonthYear.getSelectedItem().toString();
      
      if(daymonthyear.contains("Day")){
         additionalsec = 1*24*60*60 *dateinput;
      }else if(daymonthyear.contains("Month")){
          additionalsec = 1*24*60*60*30*dateinput;
      }else if(daymonthyear.contains("Year")){
          additionalsec = 1*24*60*60*365*dateinput;
      }      
      
        totalTimeStamp = (issueDateVal/1000) + additionalsec;
        
        System.out.println(totalTimeStamp+"time added is sec :"+additionalsec+"----"+issueDateVal);
        DateFormat df = new SimpleDateFormat("yy-MM-dd",Locale.ENGLISH);
        java.util.Date date = new java.util.Date(System.currentTimeMillis() +totalTimeStamp);
         
        try {
            date = df.parse(date.toString()); //may throw the parseException
        } catch (Exception ex) {
            System.out.println(""+ex.getMessage());
        }
           
        
        System.out.println("date is "+date);
        return date;
    }

    private void jButton_confirmBorrowActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_confirmBorrowActionPerformed
        
        try{
        //    System.out.println("inside the action performed");
            int stdentId = Integer.parseInt(jTextField_studentId.getText());
            int bookId = Integer.parseInt(jTextField_bookId.getText());
            int adminId = AdminDAO.CURRENT_ADMIN;
            int borrowQty = Integer.parseInt(jTextField_bookQty.getText());

            String getDate = jTextField_issueDate.getText();
            java.sql.Date issueDate,submissionDate;
            DateFormat df = new SimpleDateFormat("yy-MM-dd",Locale.ENGLISH);
            java.util.Date date = df.parse(getDate); //may throw the parseException
            issueDate = new Date(date.getTime()); //util.date to sql.date conversion
            java.util.Date subdateFromFunction = getSubmisssionDateValue(date.getTime());
            submissionDate = new Date(subdateFromFunction.getTime()); //util.date to sql.date conversion
            System.out.println("issue date :"+issueDate+"---"+submissionDate+"----"+subdateFromFunction);
            Borrow brw = new Borrow();
            brw.setAdminId(adminId);
            brw.setBookId(bookId);
            brw.setBorrowDate(issueDate);
            brw.setBorrowQuantity(borrowQty);
            brw.setStudentId(stdentId);
            brw.setSubmisionDate(submissionDate);
            System.out.println(brw);
            BorrowDAO  bDAO = new BorrowDAO();
            boolean success = bDAO.insertBorrowRecord(brw);
            if(success){
                JOptionPane.showMessageDialog(null,"Borrowing confirmed");
                clearAllTextField();
            }
            else{
                System.out.println("error in the insertion of the borrow book");
                JOptionPane.showMessageDialog(null, "Failed because : "+ErrorOutputHolder.borrowErrorText);
            }
        }
        catch(ParseException ex){
            System.out.println("form the Boroow book parseException "+ex);
        }

    }//GEN-LAST:event_jButton_confirmBorrowActionPerformed

    private void jTextField_studentIdKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_studentIdKeyTyped
      char c = (char)evt.getKeyChar();
      if(InputController.allowOnlyNumber(evt, c)){
            jLabel1.setText("");
        }else{
            jLabel1.setForeground(Color.RED);
           jLabel1.setText("only number is allowed");
        }
    }//GEN-LAST:event_jTextField_studentIdKeyTyped

    private void jTextField_studentIdKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_studentIdKeyPressed
      
    }//GEN-LAST:event_jTextField_studentIdKeyPressed

    private void jTextField_studentIdKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_studentIdKeyReleased
        // TODO add your handling code here:
    
     char c = (char)evt.getKeyChar();
    if(InputController.allowOnlyNumber(evt, c)){
    search = jTextField_studentId.getText();
     
     Student student = new Student();
     student.setStudentId(Integer.parseInt(search));
     StudentDAO studentdao = new StudentDAO();
     student  = studentdao.getAllStudentRecord(student);
     //after this statement exectuion then the student object will consist of all 
     //information about the student;
     if(student!=null){jTextField_fullName.setText(student.getFirstName()+" "+student.getLastName());
     jTextField_batch.setText(""+student.getBatch());
     jTextField_departMent.setText(student.getDepartment());
     }
     else{
         System.out.println("there is no such student our the system");
         jLabel1.setText("No such Records");
     }
    }
    }//GEN-LAST:event_jTextField_studentIdKeyReleased

    private void jTextField_bookIdKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_bookIdKeyReleased
        // TODO add your handling code here:
     try{    String code =jTextField_bookId.getText();
        BookDAO bookdao = new BookDAO();
        Book book = new Book();
        book.setBookCode(Integer.parseInt(code));
        book = bookdao.getSearchResultAndUpdate(book);
        if(book.getBookTitle()!=null){    
           jLabel_bookIdError.setForeground(null);
           jLabel_bookIdError.setText("Match found..!!!");
        }
        else{
            jLabel_bookIdError.setForeground(Color.red);
            jLabel_bookIdError.setText("No match found for this Book Code");
        }
     }
     catch(Exception ex){
         System.out.println(""+ex.getMessage());
     }
    }//GEN-LAST:event_jTextField_bookIdKeyReleased

    private void jTextField_bookQtyKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_bookQtyKeyReleased
        // TODO add your handling code here:

    }//GEN-LAST:event_jTextField_bookQtyKeyReleased

    private void jTextField_issueDateFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField_issueDateFocusGained
        try {
            // TODO add your handling code here:
            
            jTextField_issueDate.setText(DateManager.getCurrentDate());       
        } catch (ParseException ex) {
            Logger.getLogger(BorrowBookRecord.class.getName()).log(Level.SEVERE, null, ex);
        }
        jLabel_dateFormatHint.setText("e.g yyyy-mm-dd");
    }//GEN-LAST:event_jTextField_issueDateFocusGained

    private void jTextField_bookIdKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_bookIdKeyTyped
        // TODO add your handling code here:
             char c = (char)evt.getKeyChar();
        InputController.allowOnlyNumber(evt, c);
    }//GEN-LAST:event_jTextField_bookIdKeyTyped

    private void jTextField_bookQtyKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_bookQtyKeyTyped
        // TODO add your handling code here:
        char c = (char)evt.getKeyChar();
        InputController.allowOnlyNumber(evt, c);
        if(c!='1'){
            evt.consume();
            jLabel2.setText("One Book only for one student");
        }
        else{
            jLabel2.setText("");
        }
    }//GEN-LAST:event_jTextField_bookQtyKeyTyped

    private void jTextField_issueDateKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_issueDateKeyTyped
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_issueDateKeyTyped

    private void jTextField_issueDateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField_issueDateActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_issueDateActionPerformed
    public void clearAllTextField(){
    jTextField_bookId.setText("");
    jTextField_bookQty.setText("");
    jTextField_issueDate.setText("");
    }
    
    private void jTextField_bookIdFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField_bookIdFocusLost
        // TODO add your handling code here:        
    }//GEN-LAST:event_jTextField_bookIdFocusLost

    private void jTextField_fullNameKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_fullNameKeyTyped
        // TODO add your handling code here:
        evt.consume();
    }//GEN-LAST:event_jTextField_fullNameKeyTyped

    private void jTextField_batchKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_batchKeyTyped
        // TODO add your handling code here:
        evt.consume();
    }//GEN-LAST:event_jTextField_batchKeyTyped

    private void jTextField_departMentKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_departMentKeyTyped
        // TODO add your handling code here:
        evt.consume();
    }//GEN-LAST:event_jTextField_departMentKeyTyped

    private void jTextField_issueDateFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField_issueDateFocusLost
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_issueDateFocusLost

    private void jTextField_returnDateDigitKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_returnDateDigitKeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField_returnDateDigitKeyReleased

    private void jTextField_returnDateDigitKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_returnDateDigitKeyTyped
        // TODO add your handling code here:
        InputController.allowOnlyNumber(evt, (char)evt.getKeyChar());
    }//GEN-LAST:event_jTextField_returnDateDigitKeyTyped


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton_confirmBorrow;
    private javax.swing.JComboBox jComboBox_dayMonthYear;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel_batch;
    private javax.swing.JLabel jLabel_bookId;
    private javax.swing.JLabel jLabel_bookIdError;
    private javax.swing.JLabel jLabel_bookQty;
    private javax.swing.JLabel jLabel_date;
    private javax.swing.JLabel jLabel_dateFormatHint;
    private javax.swing.JLabel jLabel_department;
    private javax.swing.JLabel jLabel_fullName;
    private javax.swing.JLabel jLabel_title;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel_titleHolder;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JTextField jTextField_batch;
    private javax.swing.JTextField jTextField_bookId;
    private javax.swing.JTextField jTextField_bookQty;
    private javax.swing.JTextField jTextField_departMent;
    private javax.swing.JTextField jTextField_fullName;
    private javax.swing.JTextField jTextField_issueDate;
    private javax.swing.JTextField jTextField_returnDateDigit;
    private javax.swing.JTextField jTextField_studentId;
    // End of variables declaration//GEN-END:variables

    
}
